[gd_scene load_steps=6 format=3 uid="uid://bgnsh65i6hipk"]

[ext_resource type="Script" uid="uid://bg6ao5ny44wm1" path="res://Characters/Enemies/enemy.gd" id="1_3em64"]
[ext_resource type="PackedScene" uid="uid://b3tlagt4bytaq" path="res://Characters/Players/rig.tscn" id="2_oj6d0"]
[ext_resource type="PackedScene" uid="uid://dd7o6kupbvt0g" path="res://Characters/Components/health_component.tscn" id="3_oooen"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_o8ynm"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_oooen"]

[node name="Enemy" type="CharacterBody3D"]
collision_layer = 9
script = ExtResource("1_3em64")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_o8ynm")

[node name="Rig" parent="." instance=ExtResource("2_oj6d0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Skeleton3D" parent="Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(4.44089e-15, 0.910734, -0.0481736)
bones/2/rotation = Quaternion(0.0070842, -0.000271414, 0.00321105, 0.99997)
bones/3/rotation = Quaternion(-0.0885004, -0.000276136, 0.00852483, 0.99604)
bones/4/rotation = Quaternion(0.269885, 1.44034e-08, 9.16691e-08, 0.962893)
bones/6/rotation = Quaternion(-0.165193, -1.17572e-07, -1.96925e-08, 0.986261)
bones/7/position = Vector3(-2.99057e-08, 0.910733, -0.0481735)
bones/8/position = Vector3(-6.05772e-08, 0.910734, -0.0481735)
bones/9/position = Vector3(0.131144, 0.976938, -0.0351291)
bones/9/rotation = Quaternion(0.994305, 0.0202167, -0.0312633, 0.0998542)
bones/11/rotation = Quaternion(0.393596, -0.000694628, 0.000297534, 0.919283)
bones/13/rotation = Quaternion(-0.740221, 0.0118435, 0.0243585, 0.671818)
bones/15/position = Vector3(-0.131144, 0.976938, -0.0351291)
bones/15/rotation = Quaternion(0.975941, -0.00525357, 0.0276888, 0.216206)
bones/17/rotation = Quaternion(0.419934, 0.0031477, -0.00145657, 0.907548)
bones/19/rotation = Quaternion(-0.677512, -0.028135, -0.00149048, 0.734972)
bones/21/position = Vector3(0.0251286, 1.44023, 0.0473627)
bones/21/rotation = Quaternion(-0.469628, -0.267588, -0.417401, 0.730495)
bones/22/position = Vector3(0.191572, 1.47929, -0.00934493)
bones/22/rotation = Quaternion(0.0201589, -0.164184, 0.975508, -0.144987)
bones/23/rotation = Quaternion(7.37335e-08, -0.0401642, 5.63969e-08, 0.999193)
bones/24/rotation = Quaternion(0.353888, -0.040171, -0.0220935, 0.934164)
bones/46/position = Vector3(-0.0113635, 1.44023, 0.0473627)
bones/46/rotation = Quaternion(-0.469242, 0.266211, 0.417094, 0.731421)
bones/47/position = Vector3(-0.177645, 1.47944, -0.00971507)
bones/47/rotation = Quaternion(-0.00814471, -0.148122, 0.976079, 0.158943)
bones/48/rotation = Quaternion(-1.26559e-07, 0.05884, -1.20467e-07, 0.998267)
bones/49/rotation = Quaternion(0.394873, 0.0588521, 0.0277909, 0.916428)
bones/71/position = Vector3(0.127191, 1.36148, -0.0243701)
bones/71/rotation = Quaternion(2.03375e-08, 0.597996, 0.801499, -4.58379e-08)
bones/72/position = Vector3(-0.113426, 1.36148, -0.0243701)
bones/72/rotation = Quaternion(2.03376e-08, 0.597996, 0.801499, -4.58378e-08)

[node name="Knight_02" parent="Rig/CharacterRig/GameRig/Skeleton3D" index="1"]
visible = false

[node name="Villager_01" parent="Rig/CharacterRig/GameRig/Skeleton3D" index="2"]
visible = true

[node name="RightHandBone" parent="Rig/CharacterRig" index="2"]
transform = Transform3D(-0.962349, -0.270782, -0.0237028, 0.220407, -0.828394, 0.514962, -0.159078, 0.490348, 0.856885, -0.351456, 1.01367, 0.032086)

[node name="LeftHandBone" parent="Rig/CharacterRig" index="3"]
transform = Transform3D(-0.97046, 0.239297, 0.0307327, -0.208326, -0.8954, 0.393521, 0.121686, 0.375494, 0.918801, 0.34843, 0.996191, -0.00581035)

[node name="HealthComponent" parent="." instance=ExtResource("3_oooen")]

[node name="PlayerDetecter" type="ShapeCast3D" parent="."]
shape = SubResource("CapsuleShape3D_oooen")
target_position = Vector3(0, 0, 1)
collision_mask = 4

[connection signal="heavy_attack" from="Rig" to="." method="_on_rig_heavy_attack"]
[connection signal="defeat" from="HealthComponent" to="." method="_on_health_component_defeat"]

[editable path="Rig"]
[editable path="Rig/CharacterRig"]
